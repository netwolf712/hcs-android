(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a25dbdd"],{"0bb7":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var i=a("70f0"),l=a("b0bd");function n(){var e={};return Object(i["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-list-dict",e)})}function o(e){var t={responseList:{updateType:1,totalLength:e.length,list:e,currentPage:0,pageSize:e.length},lastUpdateTime:(new Date).getTime()};return Object(i["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-update-dict",t)})}},6140:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",e._l(e.list,(function(t,i){return a("el-col",{key:i,staticStyle:{margin:"1px"},attrs:{span:2,offset:0}},[a("el-card",{attrs:{"body-style":{padding:"1px",height:"80px",color:"#757679"}}},[a("div",[a("span",[e._v(e._s(t.place.placeSn))]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleView(t)}}}),a("div",{staticClass:"bottom clearfix"},[a("span",[e._v(e._s(t.place.placeNo)+"床")])]),a("div",{staticClass:"bottom clearfix"},[a("span",[e._v(e._s(e.patientInfoFormat(t)))])])],1)])],1)})),1),a("el-dialog",{attrs:{title:"病床配置",visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",size:"medium"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"病床编号："}},[a("el-input",{attrs:{placeholder:"病床编号"},model:{value:e.form.place.placeNo,callback:function(t){e.$set(e.form.place,"placeNo",t)},expression:"form.place.placeNo"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"姓名："}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.form.patient.name,callback:function(t){e.$set(e.form.patient,"name",t)},expression:"form.patient.name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"年龄："}},[a("el-input",{attrs:{placeholder:"年龄"},model:{value:e.form.patient.age,callback:function(t){e.$set(e.form.patient,"age",t)},expression:"form.patient.age"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"编号："}},[a("el-input",{attrs:{placeholder:"编号"},model:{value:e.form.patient.serialNumber,callback:function(t){e.$set(e.form.patient,"serialNumber",t)},expression:"form.patient.serialNumber"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"性别："}},[a("el-radio-group",{model:{value:e.form.patient.sex,callback:function(t){e.$set(e.form.patient,"sex",t)},expression:"form.patient.sex"}},e._l(e.dict.sexDictList,(function(t){return a("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.displayName))])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入院时间："}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.inHospitalTimeDate,callback:function(t){e.inHospitalTimeDate=t},expression:"inHospitalTimeDate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"血型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patient.bloodType,callback:function(t){e.$set(e.form.patient,"bloodType",t)},expression:"form.patient.bloodType"}},e._l(e.dict.bloodTypeDictList,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.displayName,value:e.dictValue}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"病情："}},[a("el-input",{attrs:{placeholder:"病情"},model:{value:e.form.patient.illness,callback:function(t){e.$set(e.form.patient,"illness",t)},expression:"form.patient.illness"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"医嘱："}},[a("el-input",{attrs:{placeholder:"医嘱"},model:{value:e.form.patient.doctorAdvice,callback:function(t){e.$set(e.form.patient,"doctorAdvice",t)},expression:"form.patient.doctorAdvice"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"护理级别："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patient.nursingLevel,callback:function(t){e.$set(e.form.patient,"nursingLevel",t)},expression:"form.patient.nursingLevel"}},e._l(e.dict.nursingLevelDictList,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.displayName,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"危重类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patient.criticalType,callback:function(t){e.$set(e.form.patient,"criticalType",t)},expression:"form.patient.criticalType"}},e._l(e.dict.criticalTypeDictList,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.displayName,value:e.dictValue}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"计量："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patient.metering,callback:function(t){e.$set(e.form.patient,"metering",t)},expression:"form.patient.metering"}},e._l(e.dict.meteringDictList,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.displayName,value:e.dictValue}})})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"饮食："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patient.diet,callback:function(t){e.$set(e.form.patient,"diet",t)},expression:"form.patient.diet"}},e._l(e.dict.dietDictList,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.displayName,value:e.dictValue}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"隔离："}},[a("el-radio-group",{model:{value:e.form.patient.isolate,callback:function(t){e.$set(e.form.patient,"isolate",t)},expression:"form.patient.isolate"}},e._l(e.isolateOptions,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"医保类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.patient.medicalInsuranceType,callback:function(t){e.$set(e.form.patient,"medicalInsuranceType",t)},expression:"form.patient.medicalInsuranceType"}},e._l(e.dict.medicalInsuranceTypeDictList,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.displayName,value:e.dictValue}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"过敏："}},[a("el-checkbox",{attrs:{disabled:e.hasNoAllergy},on:{change:e.handleCheckAllergyChange},model:{value:e.hasNoAllergy,callback:function(t){e.hasNoAllergy=t},expression:"hasNoAllergy"}},[e._v("无过敏")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:e.handleCheckedAllergysChange},model:{value:e.checkedAllergys,callback:function(t){e.checkedAllergys=t},expression:"checkedAllergys"}},e._l(e.dict.allergyDictList,(function(t){return a("el-checkbox",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.displayName))])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"防护："}},[a("el-checkbox",{attrs:{disabled:e.hasNoProtection},on:{change:e.handleCheckProtectionChange},model:{value:e.hasNoProtection,callback:function(t){e.hasNoProtection=t},expression:"hasNoProtection"}},[e._v("无需防护")]),a("div",{staticStyle:{margin:"15px 0"}}),a("el-checkbox-group",{on:{change:e.handleCheckedProtectionsChange},model:{value:e.checkedProtections,callback:function(t){e.checkedProtections=t},expression:"checkedProtections"}},e._l(e.dict.protectionDictList,(function(t){return a("el-checkbox",{key:t.dictValye,attrs:{label:t.dictValue}},[e._v(e._s(t.displayName))])})),1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},l=[],n=(a("b0c0"),a("d81d"),a("d3b7"),a("159b"),a("ac1f"),a("1276"),a("c51a")),o=a("0bb7"),r=a("70f0"),s=a("b0bd");function c(e){var t={updateType:0,totalLength:1,list:[]};return t.list.push(e),Object(r["a"])({url:"/business/custom",method:"post",data:Object(s["a"])("req-update-patient-info",t)})}var p={name:"bedList",data:function(){return{loading:!0,ids:[],multiple:!0,showSearch:!0,total:0,list:[],open:!1,dateRange:[],defaultSort:{prop:"operTime",order:"descending"},form:{place:{placeSn:0,placeNo:0},patient:{name:"",age:0,serialNumber:"",sex:0,inHospitalTime:0,illness:"",doctorAdvice:"",nursingLevel:0,criticalType:0,metering:0,diet:0,isolate:!1,allergy:0,medicalInsuranceType:0,protection:"",bloodType:0}},inHospitalTimeDate:null,hasNoAllergy:!0,checkedAllergys:[],hasNoProtection:!0,checkedProtections:[],dict:{sexDictList:[],meteringDictList:[],nursingLevelDictList:[],criticalTypeDictList:[],dietDictList:[],allergyDictList:[],medicalInsuranceTypeDictList:[],protectionDictList:[],bloodTypeDictList:[],placeDictList:[]},queryParams:{pageNum:1,pageSize:120,placeType:2},isolateOptions:[{value:!1,label:"无隔离"},{value:!0,label:"隔离"}]}},created:function(){this.getList()},methods:{getList:function(){var e=this;Object(n["a"])(this.queryParams.pageNum,this.queryParams.pageSize,this.queryParams.placeType).then((function(t){console.log(t),200===t.code?e.list=t.data.list:e.msgError(t.msg),e.loading=!1})),Object(o["a"])().then((function(t){e.dict=t.data}))},patientInfoFormat:function(e){if(e.patientModelList){var t=e.patientModelList[0];if(t)return t.patient.name}return""},deviceInfoFormat:function(e,t){if(e.deviceModelList){var a=e.deviceModelList[0];if(a)return a.device.deviceId}return""},deviceStateFormat:function(e){if(e.deviceModelList){var t=e.deviceModelList[0];if(t){if("UNKNOWN"===t.state||!t.state)return"未知";if("OFFLINE"===t.state)return"离线";if("ONLINE"===t.state)return"在线";if("TALKING"===t.state)return"通话中";if("CALLING"===t.state)return"呼叫中";if("CALL_END"===t.state)return"呼叫结束";if("REQ_CONFIG"===t.state)return"请求配置";if("INIT"===t.state)return"初始化中"}}return""},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.operId})),this.multiple=!e.length},handleView:function(e){if(this.open=!0,this.form.place=e.place,e.patientModelList){var t=e.patientModelList[0];if(t){var a=t.patient;this.form.patient=a,this.checkedAllergys=this.convertStrToCheckedId(a.allergy),this.checkedAllergys.length>0?this.hasNoAllergy=!1:this.hasNoAllergy=!0,this.checkedProtections=this.convertStrToCheckedId(a.protection),this.checkedProtections.length>0?this.hasNoProtection=!1:this.hasNoProtection=!0,this.inHospitalTimeDate=new Date,a.inHospitalTime&&this.inHospitalTimeDate.setTime(a.inHospitalTime)}}},submitForm:function(){var e=this;this.checkPatientInfo()&&Object(n["b"])(this.form.place).then((function(t){200===t.code?e.form.patient.serialNumber?e.savePatientInfo():(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))},checkPatientInfo:function(){return this.form.patient.name&&!this.form.patient.serialNumber?(this.msgError("病员编号不能为空"),!1):!(this.form.patient.serialNumber&&!this.form.patient.name)||(this.msgError("病员姓名不能为空"),!1)},savePatientInfo:function(){var e=this;this.checkPatientInfo()&&(this.form.patient.allergy=this.convertCheckedIdToStr(this.checkedAllergys),this.form.patient.protection=this.convertCheckedIdToStr(this.checkedProtections),this.inHospitalTimeDate&&(this.form.patient.inHospitalTime=this.inHospitalTimeDate.getTime()),this.form.patient.bedSn=this.form.place.placeSn,c(this.form.patient).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})))},cancel:function(){this.open=!1},handleCheckAllergyChange:function(e){!0===e&&(this.checkedAllergys=[])},handleCheckedAllergysChange:function(e){var t=e.length;this.hasNoAllergy=!(t>0)},handleCheckProtectionChange:function(e){!0===e&&(this.checkedProtections=[])},handleCheckedProtectionsChange:function(e){var t=e.length;this.hasNoProtection=!(t>0)},convertCheckedIdToStr:function(e){var t="";return e&&e.forEach((function(e,a){a>0&&(t+=","),t+=e})),t},convertStrToCheckedId:function(e){var t=[];if(e){var a=e.split(",");a.forEach((function(e){t.push(parseInt(e))}))}return t}}},d=p,u=a("2877"),m=Object(u["a"])(d,i,l,!1,null,null,null);t["default"]=m.exports},b0bd:function(e,t,a){"use strict";function i(e,t){var a={deviceType:7,deviceId:null,parentNo:null,phoneNo:null,commandId:e,ipAddress:null,macAddress:null,data:t};return a}a.d(t,"a",(function(){return i}))},c51a:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var i=a("70f0"),l=a("b0bd");function n(e,t,a){var n={currentPage:e,pageSize:t,placeType:a};return Object(i["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-list-place",n)})}function o(e){var t={updateType:0,totalLength:1,list:[]};return t.list.push(e),Object(i["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-update-place-info",t)})}}}]);