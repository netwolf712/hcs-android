(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69993689"],{"2a70":function(e,t,n){"use strict";n("cc40")},"45c5":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text item"},[e._v(" 系统当前时间："+e._s(e.deviceCurrentTime?e.timeFormater(parseInt(e.deviceCurrentTime)):"")+" ")])},i=[],r=(n("a9e3"),n("9ee1")),o={name:"CurrentTime",props:{startTime:{type:Number,default:null},hour24:{type:Boolean,default:!0}},data:function(){return{deviceCurrentTime:null}},created:function(){this.initTimeInterval()},methods:{initTimeInterval:function(){var e=this;this.timeInterval||(this.timeInterval=setInterval((function(){e.deviceCurrentTime?e.deviceCurrentTime=parseInt(e.deviceCurrentTime)+1e3:e.deviceCurrentTime=e.startTime}),1e3))},timeFormater:function(e){var t=new Date(e);return Object(r["e"])("yyyy-MM-dd HH:mm:ss",t,this.hour24)}}},s=o,u=(n("2a70"),n("2877")),l=Object(u["a"])(s,a,i,!1,null,null,null);t["a"]=l.exports},"45d6":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return c}));var a=n("70f0"),i=n("5831");function r(){var e={commandId:"maintain-req-device-base-info"};return Object(a["a"])({url:"/maintain/custom",method:"post",data:e})}function o(){var e={commandId:"maintain-req-net-config"};return Object(a["a"])({url:"/maintain/custom",method:"post",data:e})}function s(){var e={commandId:"maintain-req-time-config"};return Object(a["a"])({url:"/maintain/custom",method:"post",data:e})}function u(e){var t={commandId:"maintain-req-update-ip-address",data:e};return Object(i["a"])({url:"/maintain/custom",method:"post",data:t})}function l(e){var t={commandId:"maintain-req-update-time",data:e};return Object(i["a"])({url:"/maintain/custom",method:"post",data:t})}function c(){var e={commandId:"maintain-req-screen-capture",data:{}};return Object(i["a"])({url:"/maintain/custom",method:"post",data:e})}},5831:function(e,t,n){"use strict";var a=n("53ca"),i=(n("fb6a"),n("e9c4"),n("d3b7"),n("caad"),n("2532"),n("bc3a")),r=n.n(i),o=n("5c96"),s=n("3048"),u=n("1bb3"),l=n("e6f3"),c=n("9ee1"),m=n("1908"),d={show:!1};r.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var f=r.a.create({baseURL:"",timeout:1e4});f.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,n=!1===(e.headers||{}).repeatSubmit;if(Object(u["a"])()&&!t&&(e.headers["Authorization"]="Bearer "+Object(u["a"])()),"get"===e.method&&e.params){var i=e.url+"?"+Object(c["k"])(e.params);i=i.slice(0,-1),e.params={},e.url=i}if(!n&&("post"===e.method||"put"===e.method)){var r={url:e.url,data:"object"===Object(a["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},o=m["a"].session.getJSON("sessionObj");if(void 0===o||null===o||""===o)m["a"].session.setJSON("sessionObj",r);else{var s=o.url,l=o.data,d=o.time,f=1e3;if(l===r.data&&r.time-d<f&&s===r.url){var p="数据正在处理，请勿重复提交";return console.warn("[".concat(s,"]: ")+p),Promise.reject(new Error(p))}m["a"].session.setJSON("sessionObj",r)}}return e}),(function(e){console.log(e),Promise.reject(e)})),f.interceptors.response.use((function(e){var t=e.data.code||200,n=l["a"][t]||e.data.msg||l["a"]["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(d.show||(d.show=!0,o["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){d.show=!1,s["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){d.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(o["Message"])({message:n,type:"error"}),Promise.reject(new Error(n))):200!==t?(o["Notification"].error({title:n}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t={},n=e.message;return"Network Error"==n?(n="后端接口连接异常",t.code=500):n.includes("timeout")?(n="系统接口请求超时",t.code=500):n.includes("Request failed with status code")&&(e.response&&e.response.data&&!e.response.data.msg?(n=e.response.data.msg,t.code=500):(n="系统接口"+n.substr(n.length-3)+"异常",t.code=e.response.status)),t.message=n,t})),t["a"]=f},b38c:function(e,t,n){"use strict";n("db04")},b545:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card-time"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"card-title"},[e._v(e._s(e.cardName))]),e.readOnly?e._e():n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.doSubmit(!1)}}},[e._v("修改")]),e.readOnly||e.timeConfig.enableNtp?e._e():n("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"12px"},attrs:{type:"text"},on:{click:function(t){return e.doSubmit(!0)}}},[e._v("与本机同步时间")])],1),n("current-time",{attrs:{startTime:e.deviceCurrentTime?parseInt(e.deviceCurrentTime):null,hour24:e.timeConfig.hour24}}),n("div",{staticClass:"text item"},[e._v(" 是否24小时制： "),n("el-radio-group",{model:{value:e.timeConfig.hour24,callback:function(t){e.$set(e.timeConfig,"hour24",t)},expression:"timeConfig.hour24"}},e._l(e.hour24Options,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value,disabled:e.readOnly}},[e._v(e._s(t.label))])})),1)],1),n("div",{staticClass:"text item"},[e._v(" 是否自动获取时区： "),n("el-radio-group",{model:{value:e.timeConfig.autoTimeZone,callback:function(t){e.$set(e.timeConfig,"autoTimeZone",t)},expression:"timeConfig.autoTimeZone"}},e._l(e.autoTimeZoneOptions,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value,disabled:e.readOnly}},[e._v(e._s(t.label))])})),1)],1),n("div",{staticClass:"text item"},[e._v(" 当前时区： "),n("el-select",{attrs:{placeholder:"请选择",disabled:e.timeConfig.autoTimeZone||e.readOnly},model:{value:e.timeConfig.timeZoneId,callback:function(t){e.$set(e.timeConfig,"timeZoneId",t)},expression:"timeConfig.timeZoneId"}},e._l(e.timeZoneOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("div",{staticClass:"text item"},[e._v(" 是否启用NTP服务器： "),n("el-radio-group",{model:{value:e.timeConfig.enableNtp,callback:function(t){e.$set(e.timeConfig,"enableNtp",t)},expression:"timeConfig.enableNtp"}},e._l(e.ntpOptions,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value,disabled:e.readOnly}},[e._v(e._s(t.label))])})),1)],1),e.timeConfig.enableNtp?n("div",{staticClass:"text item"},[e._v(" NTP服务器地址："),n("el-input",{staticStyle:{width:"180px"},attrs:{disabled:!e.timeConfig.enableNtp||e.readOnly,placeholder:"NTP服务器地址"},model:{value:e.timeConfig.ntpServer,callback:function(t){e.$set(e.timeConfig,"ntpServer",t)},expression:"timeConfig.ntpServer"}})],1):e._e()],1)],1)},i=[],r=n("45d6"),o=n("45c5"),s={name:"TimeInfo",components:{CurrentTime:o["a"]},props:{cardName:{type:String,default:"时间信息"},readOnly:{type:Boolean,default:!0},autoLoad:{type:Boolean,default:!1}},data:function(){return{timeConfig:{enableNtp:!0,ntpServer:"",unixTime:null,hour24:!0,timeZoneName:null,timeZoneId:null},ntpOptions:[{value:!1,label:"停用"},{value:!0,label:"启用"}],hour24Options:[{value:!1,label:"12小时制"},{value:!0,label:"24小时制"}],autoTimeZoneOptions:[{value:!1,label:"手动设置时区"},{value:!0,label:"自动获取时区"}],timeZoneOptions:[{value:"Asia/Shanghai",label:"中国标准时间"},{value:"Asia/Hong_Kong",label:"中国香港"},{value:"Asia/Taipei",label:"中国台北"}],deviceCurrentTime:null}},watch:{autoLoad:function(e){e&&this.getInfo()}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;Object(r["d"])().then((function(t){200===t.code?(e.timeConfig=t.data,e.deviceCurrentTime=e.timeConfig.unixTime):e.msgError(t.msg)}))},doSubmit:function(e){var t=this;if(this.timeConfig.enableNtp||!e)this.timeConfig.unixTime=null;else{var n=new Date;this.timeConfig.unixTime=n.getTime()}this.timeConfig.timeZoneName=null,Object(r["f"])(this.timeConfig).then((function(e){if(t.dialogVisible=!1,200==e.code){if(t.msgSuccess("修改成功"),!t.timeConfig.enableNtp){var n=new Date;t.deviceCurrentTime=n.getTime()}}else t.msgError(e.msg?e.msg:"修改失败")})).catch((function(e){t.dialogVisible=!1}))}}},u=s,l=(n("b38c"),n("2877")),c=Object(l["a"])(u,a,i,!1,null,null,null);t["a"]=c.exports},b8c5:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("time-info",{attrs:{readOnly:!1,autoLoad:!0}})],1)],1)],1)},i=[],r=n("b545"),o={name:"baseInfo",components:{TimeInfo:r["a"]},data:function(){return{}},created:function(){},methods:{}},s=o,u=n("2877"),l=Object(u["a"])(s,a,i,!1,null,null,null);t["default"]=l.exports},cc40:function(e,t,n){},db04:function(e,t,n){}}]);