(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31b2e883"],{2422:function(t,e,n){t.exports=n.p+"static/img/room_style_1.a5e5b15b.jpg"},"7b3e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"cardTitle"},[n("span",[t._v("病房门口屏设置")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存设置")])],1),n("el-tabs",{attrs:{type:"card"},model:{value:t.tabsActiveName,callback:function(e){t.tabsActiveName=e},expression:"tabsActiveName"}},[n("el-tab-pane",{attrs:{label:"显示风格",name:"tab1"}},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-radio-group",{on:{change:t.handleStyleChange},model:{value:t.templateConfig.themeId,callback:function(e){t.$set(t.templateConfig,"themeId",e)},expression:"templateConfig.themeId"}},t._l(t.themeOptions,(function(e){return n("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1),n("el-image",{staticStyle:{width:"400px",height:"100%"},attrs:{src:t.templateUrl}})],1),n("el-tab-pane",{attrs:{label:"屏保",name:"tab3"}},[n("div",{staticClass:"text item"},[n("span",[t._v("屏保内容：")]),n("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"屏保显示内容"},model:{value:t.templateConfig.screenSaver,callback:function(e){t.$set(t.templateConfig,"screenSaver",e)},expression:"templateConfig.screenSaver"}})],1),n("div",{staticClass:"text item"},[n("span",[t._v("屏保时间：")]),n("el-input",{staticStyle:{width:"80px"},attrs:{type:"number"},model:{value:t.templateConfig.screenSaverTime,callback:function(e){t.$set(t.templateConfig,"screenSaverTime",e)},expression:"templateConfig.screenSaverTime"}}),n("span",{staticStyle:{"margin-left":"5px"}},[t._v("秒")])],1)]),n("el-tab-pane",{attrs:{label:"功能列表",name:"tab4"}},[n("el-row",[n("el-col",{staticStyle:{width:"150px"}},[n("el-card",{staticClass:"box-card-room-template"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.allFunction,callback:function(e){t.allFunction=e},expression:"allFunction"}},[t._v("全部功能")])],1),n("el-checkbox-group",{staticClass:"columnSpan",on:{change:t.handleCheckedFunctionChange},model:{value:t.rightCheckedValue,callback:function(e){t.rightCheckedValue=e},expression:"rightCheckedValue"}},t._l(t.orgFunctionList,(function(e,i){return n("div",{key:i,staticClass:"text item"},[n("el-checkbox",{key:e.functionId,attrs:{label:e.functionId}},[t._v(t._s(e.functionName))])],1)})),0)],1)],1),n("el-col",{staticStyle:{width:"580px","margin-left":"10px"}},[n("el-card",{staticClass:"box-card-room-template"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("已选功能")])]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.templateConfig.functionList}},[n("el-table-column",{attrs:{prop:"orgName",label:"功能名称",width:"160"}}),n("el-table-column",{attrs:{prop:"functionName",label:"显示名称",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{model:{value:e.row.functionName,callback:function(n){t.$set(e.row,"functionName",n)},expression:"scope.row.functionName"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleMoveUp(e.row)}}},[t._v("上移")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleMoveDown(e.row)}}},[t._v("下移")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)],1)],1)],1)},a=[],o=(n("d3b7"),n("159b"),n("a434"),n("7db0"),n("70f0")),l=n("b0bd");function s(){var t={};return Object(o["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-list-room-function",t)})}function c(t){var e={templateId:t};return Object(o["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-get-room-template",e)})}function r(t){return Object(o["a"])({url:"/business/custom",method:"post",data:Object(l["a"])("req-update-room-template",t)})}var u=999,f={name:"roomTemplate",data:function(){return{loading:!0,templateId:"0",templateUrl:n("f393"),themeOptions:[{value:0,label:"默认风格"},{value:1,label:"风格二"}],templateConfig:{templateId:"",screenSaver:"",screenSaverTime:null,screenShutTime:null,functionList:[],themeId:0},orgFunctionList:[],rightCheckedValue:[],isIndeterminate:!1,allFunction:!1,tabsActiveName:"tab1"}},created:function(){this.getFunctionList()},methods:{renderFunc:function(t,e){return t("span",[e.label])},getFunctionList:function(){var t=this;s().then((function(e){200===e.code&&(t.orgFunctionList=e.data.list,t.transferLeftData=[],t.orgFunctionList&&t.orgFunctionList.forEach((function(e,n){if(parseInt(e.functionId)!=u){var i={key:e.functionId,label:e.functionName};t.transferLeftData.push(i)}else t.orgFunctionList.splice(n,1)})),t.getTemplate())}))},getTemplate:function(){var t=this;c(this.templateId).then((function(e){200===e.code&&(t.templateConfig=e.data,null==t.templateId&&(t.templateId=t.templateConfig.templateId),t.rightCheckedValue=[],t.templateConfig.functionList?(t.templateConfig.functionList.forEach((function(e){t.rightCheckedValue.push(e.functionId);var n=t.orgFunctionList.find((function(t){return t.functionId===e.functionId}));e.orgName=n?n.functionName:e.functionName})),t.templateConfig.functionList.length==t.orgFunctionList.length?(t.allFunction=!0,t.isIndeterminate=!1):(t.allFunction=!1,t.isIndeterminate=!0)):(t.allFunction=!1,t.isIndeterminate=!1)),t.handleStyleChange()}))},handleStyleChange:function(){0===this.templateConfig.themeId?this.templateUrl=n("f393"):1===this.templateConfig.themeId&&(this.templateUrl=n("2422"))},moveList:function(t,e,n){var i=t[e],a=t[n];return t.splice(n,1,i),t.splice(e,1,a),t},upData:function(t,e){t.length>1&&0!==e&&this.moveList(t,e,e-1)},downData:function(t,e){t.length>1&&e!==t.length-1&&this.moveList(t,e,e+1)},handleMoveUp:function(t){if(this.templateConfig.functionList)for(var e in this.templateConfig.functionList)if(this.templateConfig.functionList[e].functionId===t.functionId){this.upData(this.templateConfig.functionList,parseInt(e));break}},handleMoveDown:function(t){if(this.templateConfig.functionList)for(var e in this.templateConfig.functionList)if(this.templateConfig.functionList[e].functionId===t.functionId){this.downData(this.templateConfig.functionList,parseInt(e));break}},handleDelete:function(t){if(this.templateConfig.functionList)for(var e in this.templateConfig.functionList)if(this.templateConfig.functionList[e].functionId===t.functionId){this.templateConfig.functionList.splice(e,1);break}if(this.rightCheckedValue)for(var n in this.rightCheckedValue)if(this.rightCheckedValue[n]===t.functionId){this.rightCheckedValue.splice(n,1),this.allFunction=!1,this.rightCheckedValue.length>0&&(this.isIndeterminate=!0);break}},handleCheckAllChange:function(t){if(t)for(var e in this.rightCheckedValue=[],this.templateConfig.functionList=[],this.orgFunctionList){this.rightCheckedValue.push(this.orgFunctionList[e].functionId);var n={functionId:this.orgFunctionList[e].functionId,functionName:this.orgFunctionList[e].functionName,orgName:this.orgFunctionList[e].functionName};this.templateConfig.functionList.push(n)}else this.rightCheckedValue=[],this.templateConfig.functionList=[];this.isIndeterminate=!1},handleCheckedFunctionChange:function(t){var e=t.length;this.allFunction=e===this.orgFunctionList.length,this.isIndeterminate=e>0&&e<this.orgFunctionList.length;var n=[];if(e>0){if(this.templateConfig.functionList)for(var i in this.templateConfig.functionList)for(var a in t)if(this.templateConfig.functionList[i].functionId===t[a]){n.push(this.templateConfig.functionList[i]);break}for(var o in t){var l=!1;for(var s in n)if(t[o]===n[s].functionId){l=!0;break}if(!l)for(var c in this.orgFunctionList)if(this.orgFunctionList[c].functionId===t[o]){var r={functionId:this.orgFunctionList[c].functionId,functionName:this.orgFunctionList[c].functionName,orgName:this.orgFunctionList[c].functionName};n.push(r);break}}}this.templateConfig.functionList=n},handleSubmit:function(){var t=this;r(this.templateConfig).then((function(e){200===e.code?t.msgSuccess("操作成功"):t.msgError("操作失败")}))}}},h=f,m=(n("a77a"),n("2877")),d=Object(m["a"])(h,i,a,!1,null,"9ef90068",null);e["default"]=d.exports},a77a:function(t,e,n){"use strict";n("e40f")},b0bd:function(t,e,n){"use strict";function i(t,e){var n={deviceType:7,deviceId:null,parentNo:null,phoneNo:null,commandId:t,ipAddress:null,macAddress:null,data:e};return n}n.d(e,"a",(function(){return i}))},e40f:function(t,e,n){},f393:function(t,e,n){t.exports=n.p+"static/img/room_style_0.a7ad067a.jpg"}}]);