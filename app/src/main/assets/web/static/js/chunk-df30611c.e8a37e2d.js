(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df30611c"],{5831:function(e,t,a){"use strict";var n=a("53ca"),r=(a("fb6a"),a("e9c4"),a("d3b7"),a("caad"),a("2532"),a("bc3a")),o=a.n(r),s=a("5c96"),i=a("3048"),c=a("1bb3"),u=a("e6f3"),l=a("9ee1"),d=a("1908"),m={show:!1};o.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var f=o.a.create({baseURL:"",timeout:1e4});f.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,a=!1===(e.headers||{}).repeatSubmit;if(Object(c["a"])()&&!t&&(e.headers["Authorization"]="Bearer "+Object(c["a"])()),"get"===e.method&&e.params){var r=e.url+"?"+Object(l["k"])(e.params);r=r.slice(0,-1),e.params={},e.url=r}if(!a&&("post"===e.method||"put"===e.method)){var o={url:e.url,data:"object"===Object(n["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},s=d["a"].session.getJSON("sessionObj");if(void 0===s||null===s||""===s)d["a"].session.setJSON("sessionObj",o);else{var i=s.url,u=s.data,m=s.time,f=1e3;if(u===o.data&&o.time-m<f&&i===o.url){var p="数据正在处理，请勿重复提交";return console.warn("[".concat(i,"]: ")+p),Promise.reject(new Error(p))}d["a"].session.setJSON("sessionObj",o)}}return e}),(function(e){console.log(e),Promise.reject(e)})),f.interceptors.response.use((function(e){var t=e.data.code||200,a=u["a"][t]||e.data.msg||u["a"]["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(m.show||(m.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){m.show=!1,i["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){m.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(s["Message"])({message:a,type:"error"}),Promise.reject(new Error(a))):200!==t?(s["Notification"].error({title:a}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t={},a=e.message;return"Network Error"==a?(a="后端接口连接异常",t.code=500):a.includes("timeout")?(a="系统接口请求超时",t.code=500):a.includes("Request failed with status code")&&(e.response&&e.response.data&&!e.response.data.msg?(a=e.response.data.msg,t.code=500):(a="系统接口"+a.substr(a.length-3)+"异常",t.code=e.response.status)),t.message=a,t})),t["a"]=f},7726:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return d}));var n=a("70f0"),r=a("5831"),o=a("1bb3");function s(){var e={commandId:"maintain-req-device-info"};return Object(n["a"])({url:"/maintain/custom",method:"post",data:e})}function i(e){var t={commandId:"maintain-req-restart-app",data:{token:Object(o["a"])(),password:e}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}function c(e){var t={commandId:"maintain-req-restart-system",data:{token:Object(o["a"])(),password:e}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}function u(e){var t={commandId:"maintain-req-reset-system",data:{token:Object(o["a"])(),password:e}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}function l(e,t){var a={commandId:"maintain-req-recover-config",data:{recoverFilePath:e,recoverType:t}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:a})}function d(){var e={commandId:"maintain-req-is-alive"};return Object(r["a"])({url:"/maintain/custom",method:"post",data:e})}},"7dac":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("span",{staticStyle:{color:"#ff0000"}},[e._v("点击按钮将重置系统，所有数据将会恢复到出厂状态，SD卡内的数据也会被擦除，业务将会短暂中断")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showConfirmDialog()}}},[e._v("恢复出厂设置")]),a("el-dialog",{attrs:{title:"输入密码确认",visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码："}},[a("el-input",{attrs:{"show-password":"",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],o=a("7726"),s=a("1bb3"),i=a("cf8b"),c={name:"resetSystem",data:function(){return{form:{password:""},open:!1}},created:function(){i["a"].init()},methods:{openLoading:function(){this.$modal.loading("正在重启，请稍候！")},showConfirmDialog:function(){this.open=!0},cancel:function(){this.open=!1},submitForm:function(){var e=this;Object(o["d"])(this.form.password).then((function(t){200===t.code?(e.msgSuccess("发送成功"),e.open=!1,i["a"].startCheck(e.onRestartSuccess),e.openLoading()):e.msgError(t.msg)}))},onRestartSuccess:function(){this.$modal.closeLoading(),Object(s["b"])(),location.href="/index"}}},u=c,l=a("2877"),d=Object(l["a"])(u,n,r,!1,null,null,null);t["default"]=d.exports},cf8b:function(e,t,a){"use strict";var n=a("7726"),r={preStartTime:null,checkTimeInterval:2e3,checkTimer:null,aliveCallback:null,init:function(){r.stopCheck(),null==r.preStartTime&&Object(n["a"])().then((function(e){r.preStartTime=e.data.startTime}))},startCheck:function(e){r.aliveCallback=e,null==r.checkTimer&&(r.checkTimer=setInterval((function(){Object(n["a"])().then((function(e){if(200===e.code){var t=e.data.startTime;r.preStartTime!=t&&(r.preStartTime=t,r.aliveCallback&&r.aliveCallback())}else 401==e.code&&r.aliveCallback&&r.aliveCallback()})).catch((function(e){console.log(e)}))}),r.checkTimeInterval))},stopCheck:function(){null!=r.checkTimer&&(clearInterval(r.checkTimer),r.checkTimer=null),r.preStartTime=null}};t["a"]=r}}]);