(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-694472c0"],{"104b":function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861");var n=a("ddfe"),i=a("21a6"),o={downloadInterval:2e3,downloadTimer:null,filePath:[],saveFileName:null,mainType:null,subType:null,isZip:!0,callback:null,packageCallback:null,autoDownload:!0,downloadFile:function(){Object(n["a"])(o.filePath,o.isZip,o.mainType,o.subType).then((function(e){var t="application/zip";"media"===o.mainType&&"audio"===o.subType?t="audio/mp3":"media"===o.mainType&&"video"===o.subType?t="audio/mp4":"media"===o.mainType&&"image"===o.subType&&(t="image/png");var a=new Blob([e],{type:t});o.saveFileName&&Object(i["saveAs"])(a,o.saveFileName),o.callback&&o.callback(o.saveFileName?o.saveFileName:window.URL.createObjectURL(a))}))},doPackageFile:function(){var e=this;Object(n["d"])(o.filePath,o.isZip,o.mainType,o.subType).then((function(t){t.code&&(200!=t.code?e.msgError(t.msg):(o.filePath=[],o.filePath.push(t.data.filePath),t.data.ready?(o.packageCallback&&o.packageCallback(t.data),o.autoDownload&&o.downloadFile()):o.startDownloadTimer()))}))},startDownload:function(e,t,a,n,i){var l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,r=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];o.filePath=e,o.isZip=l,o.mainType=t,o.subType=a,o.saveFileName=n,o.callback=i,o.packageCallback=c,o.autoDownload=r,o.doPackageFile()},startDownloadTimer:function(){null==o.downloadTimer&&setTimeout((function(){o.doPackageFile()}),o.downloadInterval)}};t["a"]=o},"2ea8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("span",{staticStyle:{color:"#ff0000"}},[e._v("点击按钮将备份此设备上的所有数据")]),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.backup()}}},[e._v("备份数据")])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticStyle:{color:"#ff0000"}},[e._v("请选择正确的备份数据并导入，数据导入后原先的配置将会被覆盖，可以选择【备份数据】功能先备份原先数据，避免数据丢失")]),a("upload-file",{attrs:{buttonName:e.buttonName,fileAccept:e.fileAccept},on:{onUploadFile:e.onUploadFile}})],1)])},i=[],o=a("104b"),l=a("4a12"),c=a("7726"),r=a("cf8b"),s=a("1bb3"),u={name:"resetSystem",components:{uploadFile:l["a"]},data:function(){return{form:{password:""},preStartTime:null,checkTimeInterval:2e3,checkTimer:null,open:!1,downloadInterval:2e3,downloadTimer:null,buttonName:"导入",fileAccept:"*.zip"}},created:function(){},methods:{openLoading:function(){this.$modal.loading("正在重启，请稍候！")},closeLoading:function(){this.$modal.closeLoading(),null!=this.checkTimer&&clearInterval(this.checkTimer),this.checkTimer=null},showConfirmDialog:function(){this.open=!0},cancel:function(){this.open=!1},submitForm:function(){},backup:function(){var e="backup.zip";this.$modal.loading("数据下载中..."),o["a"].startDownload(null,"other","backup",e,this.downloadFinished,!0)},downloadFinished:function(){this.$modal.closeLoading()},submitUpload:function(){this.$refs.upload.submit()},onUploadFile:function(e){var t=this;r["a"].init(),Object(c["c"])(e[0],1).then((function(e){200==e.code&&(t.$modal.loading("应用重启中，请稍候！"),r["a"].init(),r["a"].startCheck(t.onRestartSuccess))}))},onRestartSuccess:function(){this.$modal.closeLoading(),Object(s["b"])(),location.href="/index"}}},d=u,m=a("2877"),p=Object(m["a"])(d,n,i,!1,null,null,null);t["default"]=p.exports},"4a12":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v(e._s(e.buttonName))]),a("el-dialog",{attrs:{title:"上传文件",visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",[e._v("文件名：")]),a("el-input",{attrs:{placeholder:"文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.onUploadSuccess,"on-change":e.onChangeFile,"file-list":e.fileList,"auto-upload":!1,headers:e.headers,accept:e.fileAccept,limit:1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},i=[],o=(a("b0c0"),a("1bb3")),l={name:"uploadFile",props:{fileAccept:{type:String,default:"*.*"},buttonName:{type:String,default:"上传"}},data:function(){return{loading:!0,open:!1,fileList:[],uploadedFileList:[],uploadUrl:"/file/upload",headers:{Authorization:"Bearer "+Object(o["a"])()},fileName:"",statusOptions:[{value:!1,label:"文件"},{value:!0,label:"目录"}]}},created:function(){},methods:{cancel:function(){this.open=!1},handleAdd:function(){this.uploadedFileList=[],this.open=!0},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},onUploadSuccess:function(e){200===e.code&&(e.data.fileName=this.fileName,this.uploadedFileList.push(e.data.filePath),this.$emit("onUploadFile",this.uploadedFileList),this.$emit("onUploadFileDetail",e),this.open=!1)},onChangeFile:function(e,t){this.fileName||(this.fileName=e.name)}}},c=l,r=a("2877"),s=Object(r["a"])(c,n,i,!1,null,null,null);t["a"]=s.exports},5831:function(e,t,a){"use strict";var n=a("53ca"),i=(a("fb6a"),a("e9c4"),a("d3b7"),a("caad"),a("2532"),a("bc3a")),o=a.n(i),l=a("5c96"),c=a("3048"),r=a("1bb3"),s=a("e6f3"),u=a("9ee1"),d=a("1908"),m={show:!1};o.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var p=o.a.create({baseURL:"",timeout:1e4});p.interceptors.request.use((function(e){var t=!1===(e.headers||{}).isToken,a=!1===(e.headers||{}).repeatSubmit;if(Object(r["a"])()&&!t&&(e.headers["Authorization"]="Bearer "+Object(r["a"])()),"get"===e.method&&e.params){var i=e.url+"?"+Object(u["k"])(e.params);i=i.slice(0,-1),e.params={},e.url=i}if(!a&&("post"===e.method||"put"===e.method)){var o={url:e.url,data:"object"===Object(n["a"])(e.data)?JSON.stringify(e.data):e.data,time:(new Date).getTime()},l=d["a"].session.getJSON("sessionObj");if(void 0===l||null===l||""===l)d["a"].session.setJSON("sessionObj",o);else{var c=l.url,s=l.data,m=l.time,p=1e3;if(s===o.data&&o.time-m<p&&c===o.url){var f="数据正在处理，请勿重复提交";return console.warn("[".concat(c,"]: ")+f),Promise.reject(new Error(f))}d["a"].session.setJSON("sessionObj",o)}}return e}),(function(e){console.log(e),Promise.reject(e)})),p.interceptors.response.use((function(e){var t=e.data.code||200,a=s["a"][t]||e.data.msg||s["a"]["default"];return"blob"===e.request.responseType||"arraybuffer"===e.request.responseType?e.data:401===t?(m.show||(m.show=!0,l["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){m.show=!1,c["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){m.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===t?(Object(l["Message"])({message:a,type:"error"}),Promise.reject(new Error(a))):200!==t?(l["Notification"].error({title:a}),Promise.reject("error")):e.data}),(function(e){console.log("err"+e);var t={},a=e.message;return"Network Error"==a?(a="后端接口连接异常",t.code=500):a.includes("timeout")?(a="系统接口请求超时",t.code=500):a.includes("Request failed with status code")&&(e.response&&e.response.data&&!e.response.data.msg?(a=e.response.data.msg,t.code=500):(a="系统接口"+a.substr(a.length-3)+"异常",t.code=e.response.status)),t.message=a,t})),t["a"]=p},7726:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return d}));var n=a("70f0"),i=a("5831"),o=a("1bb3");function l(){var e={commandId:"maintain-req-device-info"};return Object(n["a"])({url:"/maintain/custom",method:"post",data:e})}function c(e){var t={commandId:"maintain-req-restart-app",data:{token:Object(o["a"])(),password:e}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}function r(e){var t={commandId:"maintain-req-restart-system",data:{token:Object(o["a"])(),password:e}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}function s(e){var t={commandId:"maintain-req-reset-system",data:{token:Object(o["a"])(),password:e}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}function u(e,t){var a={commandId:"maintain-req-recover-config",data:{recoverFilePath:e,recoverType:t}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:a})}function d(){var e={commandId:"maintain-req-is-alive"};return Object(i["a"])({url:"/maintain/custom",method:"post",data:e})}},cf8b:function(e,t,a){"use strict";var n=a("7726"),i={preStartTime:null,checkTimeInterval:2e3,checkTimer:null,aliveCallback:null,init:function(){i.stopCheck(),null==i.preStartTime&&Object(n["a"])().then((function(e){i.preStartTime=e.data.startTime}))},startCheck:function(e){i.aliveCallback=e,null==i.checkTimer&&(i.checkTimer=setInterval((function(){Object(n["a"])().then((function(e){if(200===e.code){var t=e.data.startTime;i.preStartTime!=t&&(i.preStartTime=t,i.aliveCallback&&i.aliveCallback())}else 401==e.code&&i.aliveCallback&&i.aliveCallback()})).catch((function(e){console.log(e)}))}),i.checkTimeInterval))},stopCheck:function(){null!=i.checkTimer&&(clearInterval(i.checkTimer),i.checkTimer=null),i.preStartTime=null}};t["a"]=i},ddfe:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c}));var n=a("70f0");function i(e,t,a,i){var o={commandId:"maintain-req-get-file-list",data:{dir:e,mainType:t,subType:a,withDir:i}};return Object(n["a"])({url:"/maintain/custom",method:"post",data:o})}function o(e,t,a,i){var o={fileList:e,zipAll:t,mainType:a,subType:i};return Object(n["a"])({url:"/file/download",method:"post",data:o,responseType:"blob"})}function l(e,t,a,i){var o={fileList:e,zipAll:t,mainType:a,subType:i},l={commandId:"maintain-req-package-file",data:o};return Object(n["a"])({url:"/maintain/custom",method:"post",data:l})}function c(e){var t={commandId:"maintain-req-operate-file",data:e};return Object(n["a"])({url:"/maintain/custom",method:"post",data:t})}}}]);