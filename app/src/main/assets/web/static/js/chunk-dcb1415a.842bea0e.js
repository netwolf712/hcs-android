(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcb1415a"],{"5d6f":function(t,e,r){"use strict";r("c927")},b0bd:function(t,e,r){"use strict";function a(t,e){var r={deviceType:7,deviceId:null,parentNo:null,phoneNo:null,commandId:t,ipAddress:null,macAddress:null,data:e};return r}r.d(e,"a",(function(){return a}))},b45c:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"cardTitle"},[r("span",[t._v("附加主机设置")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",plain:""},on:{click:t.handleAddStepMaster}},[t._v("添加附加主机")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:t.handleSubmit}},[t._v("保存设置")])],1),r("div",[t._v(" 在设定的附加呼叫时间内，本机的直属分机呼叫未被接听，则会呼叫到附加主机上。开启呼叫上传后洗手间报警也会上传。 ")]),t._l(t.stepMasters,(function(e,a){return r("div",{key:a,staticClass:"appendMasterItem"},[r("span",[t._v("附加主机编号：")]),r("el-input",{class:e.border,staticStyle:{width:"80px"},attrs:{type:"number",max:"1000",min:"100"},on:{blur:function(r){return t.checkNumber(e,a)}},model:{value:e.masterNo,callback:function(r){t.$set(e,"masterNo",r)},expression:"stepMaster.masterNo"}}),r("span",{staticStyle:{"margin-left":"20px"}},[t._v("附加呼叫时间：")]),r("el-input",{staticStyle:{width:"80px"},attrs:{type:"number"},on:{blur:function(r){return t.checkCallWaitTime(e)}},model:{value:e.callWaitTime,callback:function(r){t.$set(e,"callWaitTime",r)},expression:"stepMaster.callWaitTime"}}),r("span",{staticStyle:{"margin-left":"5px"}},[t._v("秒（范围：0-240秒）")]),r("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.handleDelete(a)}}})],1)}))],2)},s=[],n=(r("d3b7"),r("159b"),r("a434"),r("dc14")),i=1,c=2,o=4,l={name:"appendMaster",data:function(){return{masterSelf:"",queryParams:{pageNum:1,pageSize:100},orgStepMasterList:[],stepMasters:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(n["a"])(this.queryParams.pageNum,this.queryParams.pageSize,null).then((function(e){200===e.code&&(t.masterSelf=e.data.masterNo,t.orgStepMasterList=e.data.list,t.orgStepMasterList&&t.orgStepMasterList.forEach((function(e){e.masterType===c&&(e.border="normalBorder",t.stepMasters.push(e))})))}))},checkNumber:function(t,e){var r="";isNaN(t.masterNo)||(r=parseInt(t.masterNo),r=r<=100?100:r,r=r>=1e3?999:r),t.masterNo=r},checkCallWaitTime:function(t){var e="";isNaN(t.callWaitTime)||(e=parseInt(t.callWaitTime),e=e<=0?0:e,e=e>=240?240:e),t.callWaitTime=e},preCheck:function(){if(this.orgStepMasterList)for(var t in this.stepMasters){var e=this.stepMasters[t];if(!e.masterNo)return this.msgError("附加主机编号不能为空"),e.border="alarmBorder",!1;if(parseInt(e.masterNo)===parseInt(this.masterSelf))return this.msgError("附加主机不能是本机"),e.border="alarmBorder",!1;for(var r in this.orgStepMasterList){var a=this.orgStepMasterList[r];if((a.masterType==i||a.masterType==o)&&parseInt(e.masterNo)===parseInt(a.masterNo))return a.masterType==i?(this.msgError("附加主机不能是上级主机"),e.border="alarmBorder",!1):(this.msgError("附加主机不能是托管主机"),e.border="alarmBorder",!1)}e.border="normalBorder"}return!0},handleSubmit:function(){var t=this;this.preCheck()?(this.$forceUpdate(),Object(n["b"])(this.stepMasters,c).then((function(e){200===e.code?t.msgSuccess("附加主机设置成功"):t.msgError("附加主机设置失败")}))):this.$forceUpdate()},handleAddStepMaster:function(){var t={masterType:c,masterNo:"",callWaitTime:30,masterLevel:0};this.stepMasters.push(t)},handleDelete:function(t){this.stepMasters.splice(t,1)}}},u=l,p=(r("5d6f"),r("2877")),d=Object(p["a"])(u,a,s,!1,null,null,null);e["default"]=d.exports},c927:function(t,e,r){},dc14:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));var a=r("70f0"),s=r("b0bd");function n(t,e,r){var n={currentPage:t,pageSize:e,stepMasterType:r};return Object(a["a"])({url:"/business/custom",method:"post",data:Object(s["a"])("req-list-step-master",n)})}function i(t,e){var r={updateType:0,totalLength:t.length,list:t},n={responseList:r,stepMasterType:e};return Object(a["a"])({url:"/business/custom",method:"post",data:Object(s["a"])("req-update-step-master",n)})}}}]);