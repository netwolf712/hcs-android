(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63c12eaf"],{"0095":function(e,t,a){},"04d1":function(e,t,a){var i=a("342f"),r=i.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},2485:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"cardTitle"},[a("span",[e._v(e._s(e.cardName))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",plain:""},on:{click:e.handleAddTimeSlot}},[e._v("添加时段")]),e.saveBySelf?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("保存设置")]):e._e()],1),e._l(e.timeSlotList,(function(t,i){return a("div",{key:i,staticClass:"timeSlotItem"},[a("time-slot-card",{attrs:{timeSlot:t,cardIndex:i},on:{onDeleteTimeSlot:e.handleDelTimeSlot}})],1)}))],2)},r=[],l=(a("a9e3"),a("a434"),a("70f0")),n=a("b0bd");function s(e,t,a){var i={currentPage:e,pageSize:t,timeSlotType:a};return Object(l["a"])({url:"/business/custom",method:"post",data:Object(n["a"])("req-list-time-slot",i)})}function o(e,t){var a={updateType:0,totalLength:e.length,list:e},i={responseList:a,timeSlotType:t};return Object(l["a"])({url:"/business/custom",method:"post",data:Object(n["a"])("req-update-time-slot",i)})}var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("span",[e._v("启 用：")]),a("el-checkbox",{on:{change:e.handleStateChange},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),a("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.handleDelete}})],1),a("div",{staticClass:"columnSpan"},[a("span",[e._v("时间范围：")]),a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",format:"HH:mm:ss"},on:{change:e.handleTimeSpanChange},model:{value:e.timePicker,callback:function(t){e.timePicker=t},expression:"timePicker"}})],1),a("div",{staticClass:"columnSpan"},[a("span",[e._v("执行周期：")]),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.allPeriod,callback:function(t){e.allPeriod=t},expression:"allPeriod"}},[e._v("全选")]),a("el-checkbox-group",{staticClass:"columnSpan",on:{change:e.handleCheckedPeriodsChange},model:{value:e.periodList,callback:function(t){e.periodList=t},expression:"periodList"}},e._l(e.periodOptions,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)])},u=[],d=(a("b65f"),a("ac1f"),a("1276"),a("4e82"),a("d3b7"),a("159b"),36e5),m=6e4,p=2022,h=9,f=6,v={name:"timeSlotSettings",components:{},props:{timeSlot:{type:Object,default:function(){return{startTime:1081e4,endTime:1084e4,period:"0,1,2,3,4,5,6,7",state:1,type:1}}},cardIndex:{type:Number,default:0}},data:function(){return{periodOptions:[{value:"0",label:"周日"},{value:"1",label:"周一"},{value:"2",label:"周二"},{value:"3",label:"周三"},{value:"4",label:"周四"},{value:"5",label:"周五"},{value:"6",label:"周六"}],isIndeterminate:!0,allPeriod:!0,periodList:[],timePicker:[],state:0}},created:function(){this.convertTimeSlot()},watch:{timeSlot:function(e){this.convertTimeSlot()}},methods:{timeFormater:function(e){var t=Math.trunc(e/d);e%=d;var a=Math.trunc(e/m);return new Date(p,h,f,t,a)},convertTimeSlot:function(){this.state=1===this.timeSlot.state;var e=[this.timeFormater(this.timeSlot.startTime),this.timeFormater(this.timeSlot.endTime)];this.timePicker=e,this.timeSlot.period?this.periodList=this.timeSlot.period.split(","):this.periodList=[],"0,1,2,3,4,5,6,7"===this.timeSlot.period?this.allPeriod=!0:this.allPeriod=!1},handleCheckAllChange:function(e){e?(this.timeSlot.period="0,1,2,3,4,5,6",this.periodList=["0","1","2","3","4","5","6"]):(this.timeSlot.period="",this.periodList=[]),this.isIndeterminate=!1},handleCheckedPeriodsChange:function(e){var t=e.length;this.allPeriod=t===this.periodOptions.length,this.isIndeterminate=t>0&&t<this.periodOptions.length;var a="";t>0&&(e.sort((function(e,t){return e-t})),e.forEach((function(e,t){t>0&&(a+=","),a+=e}))),this.timeSlot.period=a},handleStateChange:function(e){this.timeSlot.state=e?1:0},handleTimeSpanChange:function(e){var t=e[0],a=e[1];this.timeSlot.startTime=t.getHours()*d+t.getMinutes()*m,this.timeSlot.endTime=a.getHours()*d+a.getMinutes()*m},handleDelete:function(){this.$emit("onDeleteTimeSlot",this.cardIndex)}}},b=v,S=(a("6ad0"),a("2877")),g=Object(S["a"])(b,c,u,!1,null,"29fa8c38",null),y=g.exports,T={name:"timeSlotSettings",components:{TimeSlotCard:y},props:{cardName:{type:String,default:"卡片名称"},timeSlotType:{type:Number,default:0},saveBySelf:{type:Boolean,default:!0}},data:function(){return{timeSlotList:[],queryParams:{pageNum:1,pageSize:100}}},created:function(){this.getList()},methods:{getList:function(){var e=this;s(this.queryParams.pageNum,this.queryParams.pageSize,this.timeSlotType).then((function(t){200===t.code&&(e.timeSlotList=t.data.list)}))},handleAddTimeSlot:function(){var e={startTime:324e5,endTime:36e6,period:"0,1,2,3,4,5,6,7",state:1,type:this.timeSlotType};this.timeSlotList.push(e)},handleDelTimeSlot:function(e){this.timeSlotList.splice(e,1)},handleSubmit:function(){var e=this;o(this.timeSlotList,this.timeSlotType).then((function(t){e.saveBySelf&&(200===t.code?e.msgSuccess("时间段修改成功"):e.msgError("时间段修改失败"))}))}}},k=T,N=(a("4059"),Object(S["a"])(k,i,r,!1,null,"0d2222ca",null));t["a"]=N.exports},"28a5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"cardTitle"},[a("span",[e._v("主机级别设置")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:e.handleSubmit}},[e._v("保存设置")])],1),a("div",{staticStyle:{display:"flex","margin-top":"20px"}},[a("div",{staticClass:"masterMainItem"},[a("div",{staticClass:"masterItem"},[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"number",disabled:!0,max:"1000",min:"100"},on:{input:e.checkNumber},model:{value:e.masterSelf,callback:function(t){e.masterSelf=t},expression:"masterSelf"}}),a("div",{staticClass:"masterTitle"},[e._v("本机")])],1)]),e._l(e.stepMasters,(function(t,i){return a("div",{key:i,staticClass:"masterMainItem"},[a("div",{staticClass:"masterSpan"},[e._v("→")]),a("div",{staticClass:"masterItem"},[a("el-input",{class:t.border,staticStyle:{width:"80px"},attrs:{type:"number",max:"1000",min:"100"},on:{blur:function(a){return e.checkNumber(t,i)}},model:{value:t.phoneNo,callback:function(a){e.$set(t,"phoneNo",a)},expression:"stepMaster.phoneNo"}}),a("div",{staticClass:"masterTitle"},[e._v(e._s(t.title))])],1)])}))],2),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("上传时间限制为：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.callWaitTime,callback:function(t){e.callWaitTime=t},expression:"callWaitTime"}},e._l(e.callWaitTimeOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("span",{staticStyle:{color:"red"}},[e._v("提示：")]),a("span",[e._v("通过输入上级主机编号，可形成级别管理")]),a("time-slot-settings",{ref:"timeSlotSettingsRef",staticStyle:{"margin-top":"20px"},attrs:{cardName:e.timeSlotCardName,timeSlotType:e.timeSlotType}})],1)},r=[],l=(a("d3b7"),a("159b"),a("2485")),n=a("dc14"),s=1,o=2,c=4,u=1,d={name:"stepMaster",components:{TimeSlotSettings:l["a"]},data:function(){return{timeSlotType:u,timeSlotCardName:"指定时间段禁止呼叫上传设置",masterSelf:"",stepMasters:[{title:"二级主机",phoneNo:null,level:2,border:"normalBorder"},{title:"三级主机",phoneNo:null,level:3,border:"normalBorder"},{title:"四级主机",phoneNo:null,level:4,border:"normalBorder"},{title:"五级主机",phoneNo:null,level:5,border:"normalBorder"},{title:"六级主机",phoneNo:null,level:6,border:"normalBorder"}],callWaitTime:20,callWaitTimeOption:[{value:0,label:"0秒"},{value:10,label:"10秒"},{value:20,label:"20秒（默认）"},{value:30,label:"30秒"},{value:40,label:"40秒"},{value:50,label:"50秒"},{value:60,label:"60秒"},{value:70,label:"70秒"},{value:80,label:"80秒"},{value:90,label:"90秒"},{value:100,label:"100秒"},{value:110,label:"110秒"},{value:120,label:"120秒"},{value:130,label:"130秒"},{value:140,label:"140秒"},{value:150,label:"150秒"},{value:160,label:"160秒"},{value:170,label:"170秒"},{value:180,label:"180秒"}],queryParams:{pageNum:1,pageSize:100},orgStepMasterList:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;Object(n["a"])(this.queryParams.pageNum,this.queryParams.pageSize,null).then((function(t){200===t.code&&(e.masterSelf=t.data.masterNo,e.orgStepMasterList=t.data.list,e.orgStepMasterList&&e.orgStepMasterList.forEach((function(t){t.masterType===s&&(e.stepMasters[t.masterLevel-2].phoneNo=t.masterNo,e.callWaitTime=t.callWaitTime)})))}))},checkNumber:function(e,t){var a="";isNaN(e.phoneNo)||(a=parseInt(e.phoneNo),a=a<=100?100:a,a=a>=1e3?999:a),e.phoneNo=a},preCheck:function(){if(this.orgStepMasterList)for(var e in this.stepMasters){var t=this.stepMasters[e];if(t.phoneNo){if(parseInt(t.phoneNo)===parseInt(this.masterSelf))return this.msgError("上级主机不能是本机"),t.border="alarmBorder",!1;for(var a in this.orgStepMasterList){var i=this.orgStepMasterList[a];if((i.masterType==o||i.masterType==c)&&parseInt(t.phoneNo)===parseInt(i.masterNo))return i.masterType==o?(this.msgError("上级主机不能是附加主机"),t.border="alarmBorder",!1):(this.msgError("上级主机不能是托管主机"),t.border="alarmBorder",!1)}t.border="normalBorder"}else t.border="normalBorder"}return!0},handleSubmit:function(){var e=this;if(this.preCheck()){var t=[];this.stepMasters.forEach((function(a){if(a.phoneNo){var i={masterNo:a.phoneNo,masterLevel:a.level,callWaitTime:e.callWaitTime,masterType:s};t.push(i)}})),Object(n["b"])(t,s).then((function(t){200===t.code?e.msgSuccess("主机级别设置成功"):e.msgError("主机级别设置失败")}))}}}},m=d,p=(a("6c73"),a("2877")),h=Object(p["a"])(m,i,r,!1,null,null,null);t["default"]=h.exports},"333c":function(e,t,a){},4059:function(e,t,a){"use strict";a("67f5")},"4e82":function(e,t,a){"use strict";var i=a("23e7"),r=a("e330"),l=a("59ed"),n=a("7b0b"),s=a("07fa"),o=a("577e"),c=a("d039"),u=a("addb"),d=a("a640"),m=a("04d1"),p=a("d998"),h=a("2d00"),f=a("512ce"),v=[],b=r(v.sort),S=r(v.push),g=c((function(){v.sort(void 0)})),y=c((function(){v.sort(null)})),T=d("sort"),k=!c((function(){if(h)return h<70;if(!(m&&m>3)){if(p)return!0;if(f)return f<603;var e,t,a,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)v.push({k:t+i,v:a})}for(v.sort((function(e,t){return t.v-e.v})),i=0;i<v.length;i++)t=v[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),N=g||!y||!T||!k,x=function(e){return function(t,a){return void 0===a?-1:void 0===t?1:void 0!==e?+e(t,a)||0:o(t)>o(a)?1:-1}};i({target:"Array",proto:!0,forced:N},{sort:function(e){void 0!==e&&l(e);var t=n(this);if(k)return void 0===e?b(t):b(t,e);var a,i,r=[],o=s(t);for(i=0;i<o;i++)i in t&&S(r,t[i]);u(r,x(e)),a=r.length,i=0;while(i<a)t[i]=r[i++];while(i<o)delete t[i++];return t}})},"512ce":function(e,t,a){var i=a("342f"),r=i.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},"67f5":function(e,t,a){},"6ad0":function(e,t,a){"use strict";a("333c")},"6c73":function(e,t,a){"use strict";a("0095")},addb:function(e,t,a){var i=a("f36a"),r=Math.floor,l=function(e,t){var a=e.length,o=r(a/2);return a<8?n(e,t):s(e,l(i(e,0,o),t),l(i(e,o),t),t)},n=function(e,t){var a,i,r=e.length,l=1;while(l<r){i=l,a=e[l];while(i&&t(e[i-1],a)>0)e[i]=e[--i];i!==l++&&(e[i]=a)}return e},s=function(e,t,a,i){var r=t.length,l=a.length,n=0,s=0;while(n<r||s<l)e[n+s]=n<r&&s<l?i(t[n],a[s])<=0?t[n++]:a[s++]:n<r?t[n++]:a[s++];return e};e.exports=l},b0bd:function(e,t,a){"use strict";function i(e,t){var a={deviceType:7,deviceId:null,parentNo:null,phoneNo:null,commandId:e,ipAddress:null,macAddress:null,data:t};return a}a.d(t,"a",(function(){return i}))},b65f:function(e,t,a){var i=a("23e7"),r=Math.ceil,l=Math.floor;i({target:"Math",stat:!0},{trunc:function(e){return(e>0?l:r)(e)}})},d998:function(e,t,a){var i=a("342f");e.exports=/MSIE|Trident/.test(i)},dc14:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return n}));var i=a("70f0"),r=a("b0bd");function l(e,t,a){var l={currentPage:e,pageSize:t,stepMasterType:a};return Object(i["a"])({url:"/business/custom",method:"post",data:Object(r["a"])("req-list-step-master",l)})}function n(e,t){var a={updateType:0,totalLength:e.length,list:e},l={responseList:a,stepMasterType:t};return Object(i["a"])({url:"/business/custom",method:"post",data:Object(r["a"])("req-update-step-master",l)})}}}]);